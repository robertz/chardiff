<h4>{{ title }}</h4>

<p>
  For example, mordhel-1221 or cfjedimaster-1136
</p>

<div class="error-block"></div>

<div class="row">
  <div class="col-md-6">
    <div class="col-md-4">
      <input type="text" class="form-control" name="left-account" />
    </div>
    <div class="col-md-8">
      <button class="left-lookup btn btn-primary">Look Up</button>
    </div>

    <div class="col-md-12 player-details-left">
      <select name="left-char-list" class="form-control"></select>
    </div>

    <div class="col-md-12 character-left"></div>
  </div>

  <div class="col-md-6">

  </div>

</div>
<script type="text/javascript">
  $(document).ready(function(){
    var $error = $('.error-block')
    $('.player-details-left').hide();
    $(document)
      .on('click', '.left-lookup', function(event){
       $.ajax({
         url: '/api/account/' + $('input[name=left-account]').val(),
         cache: false
       })
       .then(function(data){
         if(typeof data.code === 'undefined'){
           var $sel = $('select[name=left-char-list]');
           $sel.empty();
           $('<option />', {
             val: '',
             text: 'Select a Hero'
           })
           .appendTo($sel);
           for(var i = 0; i < data.heroes.length; i++){
             var desc = data.heroes[i].name + ' - Level ' + data.heroes[i].level + '(' + data.heroes[i].paragonLevel + ') ' + data.heroes[i].class + ' ';
             $('<option />', {
               val: data.heroes[i].id,
               text: desc
             })
             .appendTo($sel);
           };
           $('.player-details-left').show();
         }
         else { // Houston, we have a problem
           $('<p />', {
             class: 'bg-danger',
             text: 'That account was not found!'
           })
           .appendTo($error);
           setTimeout(function(){
             $error.children().slideUp();
           }, 5000);
           setTimeout(function(){
             $error.children().remove();
           }, 7000);
         }
       });
     }) // end of left-lookup click event
     .on('change', 'select[name=left-char-list]', function(event){
       if($(this).val().length){
         $.ajax({
           url: '/character-info/' + $('input[name=left-account]').val() + '/' + $(this).val(),
           cache: false
         })
         .then(function(data){
           $('.character-left').html(data);
         })
       }
     });
  })
</script>
